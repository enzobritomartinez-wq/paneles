<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PANEL DE CONTROL - USI</title>
  <link rel="icon" type="image/png" href="https://i.imgur.com/zv99dUA.png">
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        .menu-item {
            position: relative;
            overflow: hidden;
        }
        
        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .menu-item:hover::before {
            left: 100%;
        }
        
        .menu-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .menu-container {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <main class="menu-container min-h-full flex items-center justify-center p-8 relative"><button id="theme-toggle" class="absolute top-4 right-4 bg-white hover:bg-gray-100 text-gray-700 font-semibold p-3 rounded-full shadow-lg transition-all duration-300 text-lg z-20">  </button>
   <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md animate-fade-in-up relative">
    <div class="text-center mb-6"><img src="https://i.imgur.com/zv99dUA.png" alt="Logo USI" class="mx-auto h-16 w-auto" onerror="this.src=''; this.alt='Logo no disponible'; this.style.display='none';">
    </div>
    <h1 id="panel-title" class="text-3xl font-bold text-center mb-8 text-gray-800">PANEL USI</h1>
    <div class="dropdown-container relative"><button id="main-button" class="menu-item w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-300 flex items-center justify-between"> <span id="main-button-text">Unidad de Servicios Internos</span>
      <svg id="dropdown-arrow" class="w-5 h-5 transition-transform duration-300" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg></button>
     <div id="dropdown-menu" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-2 opacity-0 invisible transform scale-95 transition-all duration-300 z-10"><a href="https://docs.google.com/spreadsheets/d/1hToscp05EBHkAU2k4raGkULKVGMPD10ZMx8Rqlj-a8c/edit?usp=sharing" target="_blank" rel="noopener noreferrer" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors duration-200 border-b border-gray-100"> Consignaciones </a> <a href="https://docs.google.com/spreadsheets/d/1Xe5ojoAC_RmZjpjlgpDYQh6C0VMx6c9nmZmX1T9GmyI/edit?gid=0#gid=0" target="_blank" rel="noopener noreferrer" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors duration-200 border-b border-gray-100"> Usados Libres </a> <a href="https://docs.google.com/spreadsheets/d/1_Kl7pYIlJY2C7UNzZ7oP-eFg0tAXvZgqxDpU0cMiL4o/edit?gid=1193906348#gid=1193906348" target="_blank" rel="noopener noreferrer" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors duration-200 border-b border-gray-100"> Usados Vendidos </a> <a href="https://docs.google.com/spreadsheets/d/1Wr4rcRv9HeTMGmjVMOMwvAeFwUN6_el6HWBhapSCmdc/edit?gid=1193906348#gid=1193906348" target="_blank" rel="noopener noreferrer" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors duration-200 border-b border-gray-100"> Faltantes Administraci贸n </a> <a href="https://docs.google.com/spreadsheets/d/1Pepu-A0ED67ZPUugLqxmp-aIOis0i9Hk6f2bngTfmBc/edit?usp=sharing" target="_blank" rel="noopener noreferrer" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors duration-200 border-b border-gray-100"> Garant铆as </a> <a href="https://docs.google.com/spreadsheets/d/1Gm5QJCId3x61W3wqCbxL5KlDovEVgArq5kVnx9WgB6I/edit?gid=1193906348#gid=1193906348" target="_blank" rel="noopener noreferrer" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors duration-200 rounded-b-lg"> Usados Finalizados </a>
     </div>
    </div><!-- Nuevo bot贸n de Pedidos de Gerencia -->
    <div class="mt-4"><a href="https://docs.google.com/spreadsheets/d/18gnDuOqSPfTaUW-8BywUSdxtUERW2jsBhNyGb69aZB0/edit?usp=sharing" target="_blank" rel="noopener noreferrer" class="block"> <button id="management-button" class="menu-item w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-300"> <span>Pedidos de Gerencia</span> </button> </a>
    </div>
   </div>
  </main>
  <script>
        const defaultConfig = {
            panel_title: "PANEL USI",
            main_button_text: "Unidad de Servicios Internos",
            theme: "green"
        };

        async function render(config) {
            const panelTitle = document.getElementById('panel-title');
            const mainButtonText = document.getElementById('main-button-text');
            const mainButton = document.getElementById('main-button');
            const managementButton = document.getElementById('management-button');
            const menuContainer = document.querySelector('.menu-container');
            const currentTheme = config.theme || defaultConfig.theme;

            if (panelTitle) {
                panelTitle.textContent = config.panel_title || defaultConfig.panel_title;
                panelTitle.style.fontFamily = config.font_family ? `${config.font_family}, Arial, sans-serif` : 'Arial, sans-serif';
                panelTitle.style.fontSize = config.font_size ? `${config.font_size * 1.8}px` : '30px';
                panelTitle.style.color = config.title_color || '#1f2937';
            }

            if (mainButtonText) {
                mainButtonText.textContent = config.main_button_text || defaultConfig.main_button_text;
            }

            if (mainButton) {
                mainButton.style.fontFamily = config.font_family ? `${config.font_family}, Arial, sans-serif` : 'Arial, sans-serif';
                mainButton.style.fontSize = config.font_size ? `${config.font_size}px` : '16px';
                
                // Aplicar tema
                if (currentTheme === 'red') {
                    mainButton.style.backgroundColor = config.primary_color || '#dc2626';
                    mainButton.classList.remove('bg-green-600', 'hover:bg-green-700');
                    mainButton.classList.add('bg-red-600', 'hover:bg-red-700');
                } else {
                    mainButton.style.backgroundColor = config.primary_color || '#16a34a';
                    mainButton.classList.remove('bg-red-600', 'hover:bg-red-700');
                    mainButton.classList.add('bg-green-600', 'hover:bg-green-700');
                }
            }

            // Aplicar estilos al bot贸n de gerencia
            if (managementButton) {
                managementButton.style.fontFamily = config.font_family ? `${config.font_family}, Arial, sans-serif` : 'Arial, sans-serif';
                managementButton.style.fontSize = config.font_size ? `${config.font_size}px` : '16px';
            }

            // Aplicar tema al fondo
            if (menuContainer) {
                if (currentTheme === 'red') {
                    menuContainer.style.background = 'linear-gradient(135deg, #dc2626 0%, #991b1b 100%)';
                } else {
                    menuContainer.style.background = 'linear-gradient(135deg, #16a34a 0%, #15803d 100%)';
                }
            }
        }

        function mapToCapabilities(config) {
            const currentTheme = config.theme || defaultConfig.theme;
            const defaultPrimaryColor = currentTheme === 'red' ? '#dc2626' : '#16a34a';
            
            return {
                recolorables: [
                    {
                        get: () => config.primary_color || defaultPrimaryColor,
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.title_color || '#1f2937',
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ title_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || 'Arial',
                    set: (value) => {
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || 16,
                    set: (value) => {
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["panel_title", config.panel_title || defaultConfig.panel_title],
                ["main_button_text", config.main_button_text || defaultConfig.main_button_text]
            ]);
        }

        // Inicializar el SDK cuando est茅 disponible
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                render,
                mapToCapabilities,
                mapToEditPanelValues
            });
        }

        // Funcionalidad del men煤 desplegable y cambio de tema
        document.addEventListener('DOMContentLoaded', function() {
            const mainButton = document.getElementById('main-button');
            const dropdownMenu = document.getElementById('dropdown-menu');
            const dropdownArrow = document.getElementById('dropdown-arrow');
            const themeToggle = document.getElementById('theme-toggle');
            let isDropdownOpen = false;

            // Funcionalidad del dropdown
            mainButton.addEventListener('click', function(e) {
                e.preventDefault();
                isDropdownOpen = !isDropdownOpen;
                
                if (isDropdownOpen) {
                    dropdownMenu.classList.remove('opacity-0', 'invisible', 'scale-95');
                    dropdownMenu.classList.add('opacity-100', 'visible', 'scale-100');
                    dropdownArrow.style.transform = 'rotate(180deg)';
                } else {
                    dropdownMenu.classList.add('opacity-0', 'invisible', 'scale-95');
                    dropdownMenu.classList.remove('opacity-100', 'visible', 'scale-100');
                    dropdownArrow.style.transform = 'rotate(0deg)';
                }
            });

            // Cerrar dropdown al hacer clic fuera
            document.addEventListener('click', function(e) {
                if (!mainButton.contains(e.target) && !dropdownMenu.contains(e.target)) {
                    isDropdownOpen = false;
                    dropdownMenu.classList.add('opacity-0', 'invisible', 'scale-95');
                    dropdownMenu.classList.remove('opacity-100', 'visible', 'scale-100');
                    dropdownArrow.style.transform = 'rotate(0deg)';
                }
            });

            // Funcionalidad del cambio de tema
            themeToggle.addEventListener('click', function() {
                const currentTheme = window.elementSdk?.config?.theme || defaultConfig.theme;
                const newTheme = currentTheme === 'green' ? 'red' : 'green';
                
                if (window.elementSdk) {
                    window.elementSdk.setConfig({ theme: newTheme });
                }
            });

            // Efecto ripple para el bot贸n principal
            mainButton.addEventListener('click', function(e) {
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                ripple.style.cssText = `
                    position: absolute;
                    width: ${size}px;
                    height: ${size}px;
                    left: ${x}px;
                    top: ${y}px;
                    background: rgba(255,255,255,0.3);
                    border-radius: 50%;
                    transform: scale(0);
                    animation: ripple 0.6s ease-out;
                    pointer-events: none;
                `;
                
                this.appendChild(ripple);
                
                setTimeout(() => {
                    ripple.remove();
                }, 600);
            });
        });

        // Agregar animaci贸n de ripple
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(2);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'999e1e750749ccba',t:'MTc2MjM2NDI0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>